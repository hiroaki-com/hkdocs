/* static/admin/custom.css (最終改善版) */

/*
 * Decap CMS Custom Stylesheet - v4 (Final Mobile Layout Fix)
 * -----------------------------
 * Concept: Forcibly fit the editor to the mobile screen width.
 */

/* --- 1. 基本設定と変数定義 --- */
:root {
  --dc-primary-color: #2e8555;
  --dc-secondary-bg: #f6f7f8;
  --dc-border-color: #e0e0e0;
  --dc-text-color: #1c1e21;
  --dc-white: #ffffff;
  --dc-spacing-unit: 8px;
  --dc-border-radius: 6px;
  --dc-mobile-font-size: 16px;
}

/* --- 2. 基本スタイル (PC/モバイル共通) --- */
[data-decap-cms-app] {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
  color: var(--dc-text-color);
}

/* (中略: PC表示用のスタイルは変更なしのため、可読性のために省略しても良いですが、念のため全て記載します) */
[data-decap-cms-app] [class*='AppHeader-header'],
[data-decap-cms-app] [class*='CollectionControls-root'] {
  background-color: var(--dc-white);
  border-color: var(--dc-border-color);
}
[data-decap-cms-app] [class*='CollectionContainer-root'] {
  background-color: var(--dc-secondary-bg);
}
[data-decap-cms-app] [class*='EntryListing-card'] {
  border-radius: var(--dc-border-radius);
  border: 1px solid var(--dc-border-color);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  margin: calc(var(--dc-spacing-unit) * 2);
}

/* --- 3. PC表示のスタイル (769px以上) --- */
@media (min-width: 769px) {
  [data-decap-cms-app] [class*='Editor-previewPane'] {
    border-left: 1px dashed var(--dc-border-color);
    padding-left: calc(var(--dc-spacing-unit) * 3) !important;
  }
}

/*
 * ===================================================================
 * --- 4. モバイル表示のスタイル (768px以下) --- 【最重要修正箇所】
 * ===================================================================
 */
@media (max-width: 768px) {
  /* 
    【FIX ①】エディタを囲むコンテナの最大幅(max-width)を上書き解除し、
    画面幅いっぱいに広がるようにする。これが「引き」のレイアウトを実現します。
  */
  [data-decap-cms-app] [class*='Editor-root'] > div {
    max-width: none !important; /* !importantで強制的に上書き */
    padding: 0;
  }

  /* 
    【FIX ②】エディタ全体の左右の余白をゼロにして、コンテナを画面の端から端まで使う。
  */
  [data-decap-cms-app] [class*='Editor-root'] {
    padding: 0;
  }

  /* 
    【FIX ③】各入力ウィジェット（タイトル等）の左右に適切な余白を再設定する。
    これにより、コンテンツが画面の端に詰まりすぎるのを防ぐ。
  */
  [data-decap-cms-app] [class*='Widget-root'] {
    padding: var(--dc-spacing-unit) calc(var(--dc-spacing-unit) * 2);
  }

  /* 
    【FIX ④】テキスト入力系フォームのスタイルを再定義。
    box-sizingを使い、paddingを含めて横幅100%に収める。
  */
  [data-decap-cms-app] input[type='text'],
  [data-decap-cms-app] textarea,
  [data-decap-cms-app] .cm-editor {
    width: 100%;
    font-size: var(--dc-mobile-font-size);
    box-sizing: border-box; /* これが重要 */
  }

  /* 
    【ご要望】Markdownエディタの枠線の色を赤に変更（確認用）
  */
  [data-decap-cms-app] .cm-editor {
    border: 2px solid #ff0000; /* 赤色に変更 */
    border-radius: var(--dc-border-radius);
    padding: var(--dc-spacing-unit);
  }
}
